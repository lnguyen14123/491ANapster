<!doctype html>
<html lang="en">
  <!--begin::Head-->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Napster | Home Page </title>
    <!--begin::Primary Meta Tags-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="title" content="Napster | Home Page" />
    <meta name="author" content="ColorlibHQ" />
    <meta
      name="description"
      content="AdminLTE is a Free Bootstrap 5 Admin Dashboard, 30 example pages using Vanilla JS."
    />
    <meta
      name="keywords"
      content="bootstrap 5, bootstrap, bootstrap 5 admin dashboard, bootstrap 5 dashboard, bootstrap 5 charts, bootstrap 5 calendar, bootstrap 5 datepicker, bootstrap 5 tables, bootstrap 5 datatable, vanilla js datatable, colorlibhq, colorlibhq dashboard, colorlibhq admin dashboard"
    />
    <!--end::Primary Meta Tags-->
    <!--begin::Fonts-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@fontsource/source-sans-3@5.0.12/index.css"
      integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q="
      crossorigin="anonymous"
    />
    <!--end::Fonts-->
    <!--begin::Third Party Plugin(OverlayScrollbars)-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/styles/overlayscrollbars.min.css"
      integrity="sha256-tZHrRjVqNSRyWg2wbppGnT833E/Ys0DHWGwT04GiqQg="
      crossorigin="anonymous"
    />
    <!--end::Third Party Plugin(OverlayScrollbars)-->
    <!--begin::Third Party Plugin(Bootstrap Icons)-->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
      integrity="sha256-9kPW/n5nn53j4WMRYAxe9c1rCY96Oogo/MKSVdKzPmI="
      crossorigin="anonymous"
    />
    <!--end::Third Party Plugin(Bootstrap Icons)-->
    <!--begin::Required Plugin(AdminLTE)-->
    <link rel="stylesheet" href="./dist/css/adminlte.css" />
    <!--end::Required Plugin(AdminLTE)-->
    <!-- apexcharts -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css"
      integrity="sha256-4MX+61mt9NVvvuPjUWdUdyfZfxSB1/Rf9WtqRHgG5S0="
      crossorigin="anonymous"
    />
    <link rel="icon" type="image/png" href="./dist/assets/img/napster_favicon.png">

  </head>
  <body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
    <!--begin::App Wrapper-->
    <div class="app-wrapper">
      <!--begin::Header-->
      <nav class="app-header navbar navbar-expand bg-body">
        <!--begin::Container-->
        <div class="container-fluid">
          <!--begin::Start Navbar Links-->
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" data-lte-toggle="sidebar" href="#" role="button">
                <i class="bi bi-list"></i>
              </a>
            </li>
            <li class="nav-item d-none d-md-block"><a href="./nappingPage.html" class="nav-link active">Home</a></li>
          </ul>
          <!--end::Start Navbar Links-->
          <!--begin::End Navbar Links-->
          <ul class="navbar-nav ms-auto">
            <!--begin::Notifications Dropdown Menu-->
            <li class="nav-item dropdown">
              <a class="nav-link" data-bs-toggle="dropdown" href="#">
                <i class="bi bi-bell-fill"></i>
                <span class="navbar-badge badge text-bg-warning">15</span>
              </a>
              <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                <span class="dropdown-item dropdown-header">15 Notifications</span>
                <div class="dropdown-divider"></div>
                <a href="#" class="dropdown-item">
                  <i class="bi bi-envelope me-2"></i> 4 new messages
                  <span class="float-end text-secondary fs-7">3 mins</span>
                </a>
                <div class="dropdown-divider"></div>
                <a href="#" class="dropdown-item">
                  <i class="bi bi-people-fill me-2"></i> 8 friend requests
                  <span class="float-end text-secondary fs-7">12 hours</span>
                </a>
                <div class="dropdown-divider"></div>
                <a href="#" class="dropdown-item">
                  <i class="bi bi-file-earmark-fill me-2"></i> 3 new reports
                  <span class="float-end text-secondary fs-7">2 days</span>
                </a>
                <div class="dropdown-divider"></div>
                <a href="#" class="dropdown-item dropdown-footer"> See All Notifications </a>
              </div>
            </li>
            <!--end::Notifications Dropdown Menu-->
            <!--begin::Fullscreen Toggle-->
            <li class="nav-item">
              <a class="nav-link" href="#" data-lte-toggle="fullscreen">
                <i data-lte-icon="maximize" class="bi bi-arrows-fullscreen"></i>
                <i data-lte-icon="minimize" class="bi bi-fullscreen-exit" style="display: none"></i>
              </a>
            </li>
            <!--end::Fullscreen Toggle-->
            <!--begin::User Menu Dropdown-->
            <li class="nav-item dropdown user-menu">
              <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">
                <img
                  src="/dist/assets/img/user2-160x160.jpg"
                  class="user-image rounded-circle shadow"
                  alt="User Image"
                />
                <span class="username-display d-none d-md-inline"></span>
                
              </a>
              <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                <!--begin::User Image-->
                <li class="user-header text-bg-primary">
                  <img
                    src="/dist/assets/img/user2-160x160.jpg"
                    class="rounded-circle shadow"
                    alt="User Image"
                  />
                  <p class="username-display"></p>
                  <small>Member since Nov. 2023</small>

                </li>
                <!--end::User Image-->
                <!--begin::Menu Footer-->
                <li class="user-footer">
                  <a href="#" class="btn btn-default btn-flat">Profile</a>
                  <a id="logout-btn" href="#" class="btn btn-default btn-flat float-end">Sign out</a>
                </li>
                <!--end::Menu Footer-->
              </ul>
            </li>
            <!--end::User Menu Dropdown-->
          </ul>
          <!--end::End Navbar Links-->
        </div>
        <!--end::Container-->
      </nav>
      <!--end::Header-->
      <!--begin::Sidebar-->
      <aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark">
        <!--begin::Sidebar Brand-->
        <div class="sidebar-brand">
          <!--begin::Brand Link-->
          <a href="./nappingPage.html" class="brand-link">
            <!--begin::Brand Image-->
            <img
              src="/dist/assets/img/napsterlogo_image.png"
              alt="AdminLTE Logo"
              class="brand-image opacity-75 shadow"
            />
            <!--end::Brand Image-->
            <!--begin::Brand Text-->
            <span class="brand-text fw-light">Napster</span>
            <!--end::Brand Text-->
          </a>
          <!--end::Brand Link-->
        </div>
        <!--end::Sidebar Brand-->
        <!--begin::Sidebar Wrapper-->
        <div class="sidebar-wrapper">
          <nav class="mt-2">
            <!--begin::Sidebar Menu-->
            <ul
              class="nav sidebar-menu flex-column"
              data-lte-toggle="treeview"
              role="menu"
              data-accordion="false"
            >

              <li class="nav-item menu-open">
                <a href="./nappingPage.html" class="nav-link active">
                  <i class="nav-icon bi bi-moon-stars"></i>
                  <p>Home</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="./dashboard.html" class="nav-link">
                  <i class="nav-icon bi bi-speedometer"></i>
                  <p>
                    Dashboard
                  </p>
                </a>
              </li>
              <li class="nav-item">
                <a href="./napHistory.html" class="nav-link">
                  <i class="nav-icon bi bi-moon-stars"></i>
                  <p>Nap History</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="./napSchedule.html" class="nav-link">
                  <i class="nav-icon bi bi-moon-stars"></i>
                  <p>Nap Schedule</p>
                </a>
              </li>

              <li class="nav-item">
                <a href="./settings.html" class="nav-link">
                  <i class="nav-icon bi bi-moon-stars"></i>
                  <p>Settings</p>
                </a>
              </li>



                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="nav-icon bi bi-box-arrow-in-right"></i>
                      <p>
                        Version 1
                        <i class="nav-arrow bi bi-chevron-right"></i>
                      </p>
                    </a>
                    <ul class="nav nav-treeview">
                      <li class="nav-item">
                        <a href="./examples/login.html" class="nav-link">
                          <i class="nav-icon bi bi-circle"></i>
                          <p>Login</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="./examples/register.html" class="nav-link">
                          <i class="nav-icon bi bi-circle"></i>
                          <p>Register</p>
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="nav-icon bi bi-box-arrow-in-right"></i>
                      <p>
                        Version 2
                        <i class="nav-arrow bi bi-chevron-right"></i>
                      </p>
                    </a>
                    <ul class="nav nav-treeview">
                      <li class="nav-item">
                        <a href="./examples/login-v2.html" class="nav-link">
                          <i class="nav-icon bi bi-circle"></i>
                          <p>Login</p>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="./examples/register-v2.html" class="nav-link">
                          <i class="nav-icon bi bi-circle"></i>
                          <p>Register</p>
                        </a>
                      </li>
                    </ul>
                  </li>
                  <li class="nav-item">
                    <a href="./examples/lockscreen.html" class="nav-link">
                      <i class="nav-icon bi bi-circle"></i>
                      <p>Lockscreen</p>
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
            <!--end::Sidebar Menu-->
          </nav>
        </div>
        <!--end::Sidebar Wrapper-->
      </aside>
      <!--end::Sidebar-->
      <!--begin::App Main-->
      <main class="app-main">
        <!--begin::App Content Header-->
        <div class="app-content-header">
          <!--begin::Container-->
          <div class="container-fluid">
            <!--begin::Row-->
            <div class="row">
              <div class="col-sm-6"><h3 class="mb-0"></h3></div>
              <div class="col-sm-6">
            <!--Alarm with button-->
            <!--Styling for the page-->
            <style>
           /* Shifting button to center */
           /* Jihye Kim helped */
            .custom-alarm-wrapper {
              height: 50vh;
              display: flex;
              justify-content: center;
              align-items: center;
            }

            .custom-alarm-inner {
            text-align: center;
            transform: translateX(-300px); 
            }

            /* Coloring the button */ 
            /* Kate Dinh Helped */
            .btn-purple {
            background-color: #d6b3ff;
            color: #fff;
            border: none;
          }

          .btn-purple:hover {
          background-color: #c59aff; 
          }   

          /* Chatbot bubble icon */
          #chatbot-toggle {
          position: fixed;
          bottom: 80px;
          right: 30px;
          width: 60px;
          height: 60px;
          border-radius: 50%;
          background-color: #d6b3ff;
          color: white;
          border: none;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24px;
          z-index: 1000;
          transition: all 0.3s ease;
          }
        /* chat bot icon hoover color */
        #chatbot-toggle:hover {
        background-color: #c59aff;
        transform: scale(1.1);
        }
        /* the chatbox */
        #chatbot-window {
        position: fixed;
        bottom: 100px;
        right: 30px;
        width: 380px;
        height: 550px;
        background: white;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.15);
        display: none;
        flex-direction: column;
        z-index: 1000;
        overflow: hidden;
      }
      /* open window */
      #chatbot-window.open {
      display: flex;
      }
      /* header in the chat box */
      .chatbot-header {
      background: linear-gradient(135deg, #d6b3ff 0%, #c59aff 100%);
      color: white;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      }
      .chatbot-header h5 {
      margin: 0;
      font-weight: 600;
      }
      /* To close the chatbox */
      .chatbot-close {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: background 0.2s;
    }
    .chatbot-close:hover {
      background: rgba(255,255,255,0.2);
    }
    /* sending message and the text bubbles */
    .chatbot-messages {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      background: #f8f9fa;
    }
    .message {
      margin-bottom: 16px;
      display: flex;
      gap: 10px;
    }
    /* Ai and user icon in text chat */
    .message.user {
      flex-direction: row-reverse;
    }
    .message-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      font-size: 18px;
    }
    .message.bot .message-avatar {
      background: #d6b3ff;
      color: white;
    }
    .message.user .message-avatar {
      background: #6c757d;
      color: white;
    }
    /* the text bubble */
    .message-content {
      max-width: 70%;
      padding: 12px 16px;
      border-radius: 16px;
      word-wrap: break-word;
    }

    .message.bot .message-content {
      background: white;
      border-bottom-left-radius: 4px;
    }

    .message.user .message-content {
      background: #d6b3ff;
      color: white;
      border-bottom-right-radius: 4px;
    }
    /* AI message critera */
    .chatbot-input-area {
      padding: 16px;
      background: white;
      border-top: 1px solid #e9ecef;
    }

    .chatbot-input-wrapper {
      display: flex;
      gap: 10px;
    }

    .chatbot-input {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid #e9ecef;
      border-radius: 24px;
      outline: none;
      transition: border-color 0.2s;
    }

    .chatbot-input:focus {
      border-color: #d6b3ff;
    }

    .chatbot-send {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background-color: #d6b3ff;
      color: white;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }

    .chatbot-send:hover:not(:disabled) {
      background-color: #c59aff;
    }

    .chatbot-send:disabled {
      background-color: #e9ecef;
      cursor: not-allowed;
    }
    /* user typing area */
    .typing-indicator {
      display: flex;
      gap: 4px;
      padding: 12px 16px;
    }

    .typing-dot {
      width: 8px;
      height: 8px;
      background: #6c757d;
      border-radius: 50%;
      animation: typing 1.4s infinite;
    }

    .typing-dot:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dot:nth-child(3) {
      animation-delay: 0.4s;
    }
    /* allow typing in the chatbot */
    @keyframes typing {
      0%, 60%, 100% {
        opacity: 0.3;
        transform: translateY(0);
      }
      30% {
        opacity: 1;
        transform: translateY(-10px);
      }
    }

    @media (max-width: 480px) {
      #chatbot-window {
        width: calc(100vw - 20px);
        right: 10px;
        bottom: 90px;
        height: 500px;
      }
    }
          </style>

          <!--Alarm Button and Timer-->
          <div class="app-content custom-alarm-wrapper">
          <div class="custom-alarm-inner">
          <button id="alarmButton" class="btn btn-purple btn-lg px-5 py-3 fs-4 mb-3">
            <!--Ming Tung Le Work beginning-->
            <i class="bi bi-alarm-fill"></i>  Alarm
          </button>
          <br />
          <span id="alarmTimer" class="fs-2 fw-bold">00:00</span>
          </div>
          </div>
          <!--Ming Tung Le Work Ending-->
            <!--end::Row-->
          </div>
          <!--end::Container-->
        </div>
        <div class="app-content">

        <!-- Chatbot UI -->
        <button id="chatbot-toggle" aria-label="Open chatbot">
          <i class="bi bi-chat-dots-fill"></i>
        </button>
        <!--header for chat-->
        <div id="chatbot-window">
          <div class="chatbot-header">
            <h5><i class="bi bi-robot me-2"></i>Napster AI Assistant</h5>
            <button class="chatbot-close" id="chatbot-close" aria-label="Close chatbot">
          <i class="bi bi-x"></i>
        </button>
        </div>
      <!--Beginning message-->
      
      <div class="chatbot-messages" id="chatbot-messages">
        <div class="message bot">
          <div class="message-avatar">
            <i class="bi bi-robot"></i>
          </div>
          <div class="message-content">
            Hi! I'm your Napster AI assistant. How can I help you with your sleep and nap schedule today?
          </div>
        </div>
      </div>
    <!--Chatbot message sender-->
    <div class="chatbot-input-area">
      <div class="chatbot-input-wrapper">
        <input 
          type="text" 
          class="chatbot-input" 
          id="chatbot-input" 
          placeholder="Type your message..."
          autocomplete="off"
        />
        <button class="chatbot-send" id="chatbot-send" aria-label="Send message">
          <i class="bi bi-send-fill"></i>
        </button>
      </div>
    </div>
  </div>

      <!--begin::Footer-->
      <footer style="
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: #f8f9fa;
      padding: 1rem;
      text-align:left">
      <footer class="app-footer">
        <!--begin::To the end-->
        <div class="float-end d-none d-sm-inline">Dream More. Do More.</div>
        <!--end::To the end-->
        <!--begin::Copyright-->
        <strong>
          Copyright &copy; 2025&nbsp;
        </strong>
        All rights reserved.
        <!--end::Copyright-->
      </footer>
      <!--end::Footer-->
    </div>
    <!--end::App Wrapper-->
    <!--begin::Script-->
    <!--begin::Third Party Plugin(OverlayScrollbars)-->
    <script
      src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/browser/overlayscrollbars.browser.es6.min.js"
      integrity="sha256-dghWARbRe2eLlIJ56wNB+b760ywulqK3DzZYEpsg2fQ="
      crossorigin="anonymous"
    ></script>
    <!--end::Third Party Plugin(OverlayScrollbars)--><!--begin::Required Plugin(popperjs for Bootstrap 5)-->
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <!--end::Required Plugin(popperjs for Bootstrap 5)--><!--begin::Required Plugin(Bootstrap 5)-->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
      integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
      crossorigin="anonymous"
    ></script>
    <!--end::Required Plugin(Bootstrap 5)--><!--begin::Required Plugin(AdminLTE)-->
    <script src="../../dist/js/adminlte.js"></script>
    <!--end::Required Plugin(AdminLTE)--><!--begin::OverlayScrollbars Configure-->
    <script>
      const SELECTOR_SIDEBAR_WRAPPER = '.sidebar-wrapper';
      const Default = {
        scrollbarTheme: 'os-theme-light',
        scrollbarAutoHide: 'leave',
        scrollbarClickScroll: true,
      };
      document.addEventListener('DOMContentLoaded', function () {
        const sidebarWrapper = document.querySelector(SELECTOR_SIDEBAR_WRAPPER);
        if (sidebarWrapper && typeof OverlayScrollbarsGlobal?.OverlayScrollbars !== 'undefined') {
          OverlayScrollbarsGlobal.OverlayScrollbars(sidebarWrapper, {
            scrollbars: {
              theme: Default.scrollbarTheme,
              autoHide: Default.scrollbarAutoHide,
              clickScroll: Default.scrollbarClickScroll,
            },
          });
        }
      });
    </script>
    <!--end::OverlayScrollbars Configure-->
    <!-- OPTIONAL SCRIPTS -->
    <!-- apexcharts -->
    <script
      src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js"
      integrity="sha256-+vh8GkaU7C9/wbSLIcwq82tQ2wTf44aOHA8HlBMwRI8="
      crossorigin="anonymous"
    ></script>

    <script>
      fetch("/api/user")
        .then(res => {
      if (res.status === 401) {
        // Not logged in â†’ redirect to signin page
        window.location.href = "/signin";
        return null;
      }
      return res.json();
    })
    .then(data => {
      if (data && data.username) {
        document.querySelectorAll(".username-display").forEach(el => {
          el.innerText = data.username;
        });
      }
    })
    .catch(err => console.error("Fetch error:", err));

    document.getElementById("logout-btn").addEventListener("click", () => {
      fetch("/logout", {
        method: "POST"
      })
        .then(() => {
          // After logout, go to signin page
          window.location.href = "/signin";
        })
        .catch(err => console.error("Logout error:", err));
    });

  </script>

    <script>
      // Chatbot functionality
    const chatbotToggle = document.getElementById('chatbot-toggle');
    const chatbotWindow = document.getElementById('chatbot-window');
    const chatbotClose = document.getElementById('chatbot-close');
    const chatbotInput = document.getElementById('chatbot-input');
    const chatbotSend = document.getElementById('chatbot-send');
    const chatbotMessages = document.getElementById('chatbot-messages');

    // Toggle chatbot window
    chatbotToggle.addEventListener('click', () => {
      chatbotWindow.classList.add('open');
      chatbotInput.focus();
    });

    chatbotClose.addEventListener('click', () => {
      chatbotWindow.classList.remove('open');
    });

    // Add message to chat
    function addMessage(text, isUser = false) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
      
      const avatar = document.createElement('div');
      avatar.className = 'message-avatar';
      avatar.innerHTML = isUser ? '<i class="bi bi-person-fill"></i>' : '<i class="bi bi-robot"></i>';
      
      const content = document.createElement('div');
      content.className = 'message-content';
      content.textContent = text;
      
      messageDiv.appendChild(avatar);
      messageDiv.appendChild(content);
      chatbotMessages.appendChild(messageDiv);
      
      // Scroll to bottom
      chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    // Show typing indicator
    function showTypingIndicator() {
      const typingDiv = document.createElement('div');
      typingDiv.className = 'message bot';
      typingDiv.id = 'typing-indicator';
      
      const avatar = document.createElement('div');
      avatar.className = 'message-avatar';
      avatar.innerHTML = '<i class="bi bi-robot"></i>';
      
      const content = document.createElement('div');
      content.className = 'message-content typing-indicator';
      content.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
      
      typingDiv.appendChild(avatar);
      typingDiv.appendChild(content);
      chatbotMessages.appendChild(typingDiv);
      chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    function removeTypingIndicator() {
      const indicator = document.getElementById('typing-indicator');
      if (indicator) {
        indicator.remove();
      }
    }

    // Handle sending messages
    async function sendMessage() {
      const message = chatbotInput.value.trim();
      if (!message) return;

      // Add user message
      addMessage(message, true);
      chatbotInput.value = '';
      chatbotSend.disabled = true;

      // Show typing indicator
      showTypingIndicator();
      
      setTimeout(() => {
        removeTypingIndicator();
         
        addMessage(randomResponse, false);
        chatbotSend.disabled = false;
        chatbotInput.focus();
      }, 1500);
    }
    // Smart response generator
      function generateResponse(userMessage) {
      const message = userMessage.toLowerCase();
  
  // Nap duration questions
  if (message.includes('how long') && (message.includes('nap') || message.includes('sleep'))) {
    return "The ideal nap length depends on your goals: 10-20 minutes for a quick power nap, 60 minutes for memory boost, or 90 minutes for a full sleep cycle. What works best for you?";
  }
  
  // Nap timing questions
  if ((message.includes('when') || message.includes('what time')) && message.includes('nap')) {
    return "The best time to nap is typically between 1-3 PM, when your body naturally experiences an afternoon dip in energy. Avoid napping after 4 PM as it might interfere with nighttime sleep.";
  }
  
  // Benefits questions
  if (message.includes('benefit') || message.includes('why') && message.includes('nap')) {
    return "Napping can improve alertness, boost mood, enhance performance, increase creativity, and help with memory consolidation. Even a short 20-minute nap can make a big difference!";
  }
  
  // Sleep problems
  if (message.includes('cant sleep') || message.includes("can't sleep") || message.includes('insomnia')) {
    return "If you're having trouble sleeping, try: maintaining a consistent sleep schedule, avoiding caffeine 6 hours before bed, keeping your room cool and dark, and limiting screen time before sleep. Would you like more specific tips?";
  }
  
  // Alarm/wake up questions
  if (message.includes('alarm') || message.includes('wake') && !message.includes('up')) {
    return "You can set an alarm using the purple Alarm button on the home page! It will help ensure you don't oversleep your nap. Would you like tips on optimal nap durations?";
  }
  
  // Schedule questions
  if (message.includes('schedule') || message.includes('plan')) {
    return "Check out your Nap Schedule page from the sidebar! You can view and plan your naps there. A consistent schedule helps train your body for better rest.";
  }
  
  // History questions
  if (message.includes('history') || message.includes('track') || message.includes('log')) {
    return "You can view your nap history in the Nap History page from the sidebar. Tracking your naps helps you understand your sleep patterns better!";
  }
  
  // Dashboard questions
  if (message.includes('dashboard') || message.includes('stats') || message.includes('data')) {
    return "Visit the Dashboard page to see your sleep statistics and insights! It provides a comprehensive overview of your napping patterns.";
  }
  
  // Power nap
  if (message.includes('power nap')) {
    return "A power nap is a short 10-20 minute nap that boosts alertness without entering deep sleep. It's perfect for a quick energy boost during the day!";
  }
  
  // Greetings
  if (message.includes('hello') || message.includes('hi ') || message === 'hi' || message.includes('hey')) {
    return "Hello! How can I help you optimize your naps and sleep today? ðŸ˜Š";
  }
  
  // Thanks
  if (message.includes('thank') || message.includes('thanks')) {
    return "You're welcome! Let me know if you need any other sleep or nap advice. Sweet dreams! ðŸ’¤";
  }
  
  // Goodbye
  if (message.includes('bye') || message.includes('goodbye')) {
    return "Goodbye! Rest well and happy napping! ðŸŒ™";
  }
  
  // Default responses for unrelated questions
  const defaultResponses = [
    "That's an interesting question about sleep! While I'm still learning, I can help you with nap schedules, optimal nap times, and sleep tips. What would you like to know?",
    "I'm here to help with your napping needs! Try asking me about ideal nap duration, best times to nap, or check your nap history and schedule in the sidebar.",
    "Good question! I specialize in nap and sleep advice. Would you like to know about power naps, sleep cycles, or how to use the Napster features?",
    "I can help you with nap-related questions! Try asking about nap benefits, timing, duration, or explore the Dashboard and Nap History pages for insights."
  ];
  
  return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
}

// Handle sending messages
async function sendMessage() {
  const message = chatbotInput.value.trim();
  if (!message) return;

  // Add user message
  addMessage(message, true);
  chatbotInput.value = '';
  chatbotSend.disabled = true;

  // Show typing indicator
  showTypingIndicator();
  
  // Simulate thinking time
  const thinkingTime = 800 + Math.random() * 700;
  
  setTimeout(() => {
    removeTypingIndicator();
    
    // Generate response
    const response = generateResponse(message);
    addMessage(response, false);
    
    chatbotSend.disabled = false;
    chatbotInput.focus();
  }, thinkingTime);
}

// Event listeners for sending messages
chatbotSend.addEventListener('click', sendMessage);


chatbotInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter') {
    sendMessage();
  }
});

// Enable/disable send button based on input
chatbotInput.addEventListener('input', () => {
  chatbotSend.disabled = !chatbotInput.value.trim();
});

      
    </script>
    <!--end::Script-->
  </body>
  <!--end::Body-->
</html>
